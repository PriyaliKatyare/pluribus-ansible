Playbook name: l2_two_switch_cluster.yml

Switch topology:

   | | |        | | 
+--------+   +-------+
|   S0   |---|   S1  |
+--------+   +-------+
    | |         | |

Input parameters:
1. Vlan csv file (Mandatory)
2. Trunk csv file (Optional)
3. Vlag csv file (Optional)

Sample Hosts file:
# This is the Ansible inventory/hosts file
[switch]
gui-spine1 ansible_host=10.9.21.60
gui-spine2 ansible_host=10.9.21.61

Sample vlan csv file:
# vlan_id, list_of_untagged_ports
90, 5, 6, 7
92, 55, 56, 57

Sample trunk csv file:
# switch_name, trunk_name, list_of_ports
gui-spine1, s0-to-leafs, 10, 11, 12, 13
gui-spine2, s1-to-leafs, 20, 21, 22, 23

Sample vlag csv file:
# vlag_name, local_switch, local_port, peer_switch, peer_port
s0tos1-vlag, gui-spine1, s0-to-leafs, gui-spine2, s1-to-leafs

Description:
1. This playbook create vlans, trunks and vlags specified in the respective csv files.
2. If list of untagged ports are also specified in vlan csv file, then it passes that list of untagged ports to vlan-create command.
3. All vlans get created with scope fabric.
4. All vlags get created with mode active-active.
5. Vlan creation command:
vlan-create id vlan_id scope fabric untagged-ports list_of_ports
(Values for vlan_id and list_of_ports will get substituted from the vlan csv file)
6. Trunk creation command:
trunk-create name trunk_name ports list_of_ports
(Values for trunk_name and list_of_ports will get substituted from the trunk csv file)
7. Vlag creation command:
vlag-create name %s port %s peer-switch %s peer-port %s mode active-active
(Values of %s will get substituted with vlag_name, local_port, peer_switch and peer_port respectively from vlag csv file)

Note:
1. Make sure you have only two switches listed under [switch] section in hosts file.
2. Vlan csv file input is mandatory.
3. Make sure switch names in trunk and vlag csv files matches with switch names mentioned in hosts file.
4. Trunk and vlag names in respective csv files should not be greater than 59 characters long.
5. Make sure local_port and peer_port names in vlag csv file matches with trunk names specified in trunk csv file for respective switches.